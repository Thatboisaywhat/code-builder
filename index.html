<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Epic Obfuscator | Private</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        #blackout { display: none; position: fixed; inset: 0; background: black; z-index: 100; }
        #login-screen { position: fixed; inset: 0; background: #0f172a; z-index: 50; display: flex; align-items: center; justify-content: center; }
        .hidden { display: none !important; }
    </style>
</head>
<body class="bg-slate-900 text-white h-screen flex flex-col overflow-hidden">

    <div id="blackout"></div>

    <div id="login-screen">
        <div class="bg-slate-800 p-8 rounded-xl shadow-2xl border border-slate-700 w-96 text-center">
            <h2 class="text-2xl font-bold mb-6 text-blue-400">Restricted Access</h2>
            <input type="password" id="access-key" placeholder="Enter Invite Key" class="w-full p-3 rounded bg-slate-900 border border-slate-600 mb-4 focus:border-blue-500 outline-none">
            <button onclick="checkAccess()" class="w-full bg-blue-600 hover:bg-blue-500 py-3 rounded font-bold transition">Unlock System</button>
            <p id="login-error" class="text-red-500 text-sm mt-4 hidden">Invalid Key. Access Denied.</p>
        </div>
    </div>

    <div id="dashboard" class="hidden h-full flex flex-col">
        <header class="p-4 border-b border-slate-700 flex justify-between items-center bg-slate-800">
            <h1 class="text-xl font-bold tracking-tighter text-blue-400">EPIC <span class="text-white">ARMOR</span></h1>
            <div class="flex gap-4">
                <button onclick="toggleBlackout()" class="text-xs text-slate-400 hover:text-white">Blackout</button>
                <button onclick="logout()" class="bg-red-900/30 text-red-400 px-3 py-1 rounded text-sm border border-red-900/50">Lock</button>
            </div>
        </header>

        <main class="flex-1 flex p-4 gap-4">
            <div class="flex-1 flex flex-col">
                <label class="text-xs uppercase text-slate-500 font-bold mb-2">Source Lua Script</label>
                <textarea id="input-code" class="flex-1 bg-slate-950 p-4 font-mono text-sm text-blue-300 rounded border border-slate-700 outline-none resize-none" placeholder="Paste script here..."></textarea>
                <button onclick="obfuscate()" class="mt-4 bg-blue-600 hover:bg-blue-700 p-4 rounded-lg font-bold text-lg shadow-lg">OBFUSCATE SCRIPT</button>
            </div>
            
            <div class="flex-1 flex flex-col">
                <label class="text-xs uppercase text-slate-500 font-bold mb-2">Protected Output</label>
                <textarea id="output-code" readonly class="flex-1 bg-slate-900 p-4 font-mono text-sm text-green-400 rounded border border-slate-800 outline-none resize-none" placeholder="Encrypted code will appear here..."></textarea>
            </div>
        </main>
    </div>

    <script>
        // HARDCODED USERS/KEYS
        const VALID_KEYS = ["epic-admin-99", "friend-access-2026", "test-user"];

        function checkAccess() {
            const key = document.getElementById('access-key').value;
            if (VALID_KEYS.includes(key)) {
                document.getElementById('login-screen').classList.add('hidden');
                document.getElementById('dashboard').classList.remove('hidden');
                sessionStorage.setItem('isAuth', 'true');
            } else {
                const err = document.getElementById('login-error');
                err.classList.remove('hidden');
                setTimeout(() => err.classList.add('hidden'), 2000);
            }
        }

        // Simple Obfuscation (Placeholder for Phase 2)
        function obfuscate() {
            const input = document.getElementById('input-code').value;
            if(!input) return;
            
            // Basic "Spaghetti" transformation: Hex encoding strings
            let protected = `-- Protected by Epic Armor\n`;
            protected += `local _0x${Math.random().toString(16).slice(2,8)} = loadstring(game:HttpGet("https://your-site.com/api/verify"))\n`;
            
            // Scramble the text into char codes
            const scrambled = input.split('').map(char => `\\${char.charCodeAt(0)}`).join('');
            protected += `local _script = "${scrambled}"\nloadstring(_script)()`;
            
            document.getElementById('output-code').value = protected;
        }

        function toggleBlackout() {
            const b = document.getElementById('blackout');
            b.style.display = (b.style.display === 'block') ? 'none' : 'block';
        }

        function logout() {
            sessionStorage.removeItem('isAuth');
            location.reload();
        }

        // Check session on load
        if (sessionStorage.getItem('isAuth') === 'true') {
            document.getElementById('login-screen').classList.add('hidden');
            document.getElementById('dashboard').classList.remove('hidden');
        }
    </script>
</body>
</html>
